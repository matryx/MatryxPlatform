q = []
fresh = typeof system == "undefined"

if (fresh) q.push("system = contract(MatryxSystem.address, MatryxSystem)")
if (fresh) q.push("system.createVersion(1)")
if (fresh) q.push("system.setVersion(1)")

q.push("system.setContract(1, stringToBytes('MatryxPlatform'), MatryxPlatform.address)")
q.push("system.setContract(1, stringToBytes('LibPlatform'), LibPlatform.address)")
q.push("system.setContract(1, stringToBytes('LibTournament'), LibTournament.address)")
q.push("system.setContract(1, stringToBytes('LibRound'), LibRound.address)")
q.push("system.setContract(1, stringToBytes('LibSubmission'), LibSubmission.address)")

$COMMANDS

q.push("p = contract(MatryxPlatform.address, IMatryxPlatform)")

;(async () => { for (let cmd of q) await eval(cmd) })()
