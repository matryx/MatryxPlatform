

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Matryx Bounty System &mdash; Matryx 0.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Matryx Marketplace" href="marketplace.html" />
    <link rel="prev" title="The Matryx Commit System" href="commit-system.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Matryx
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="entering-matryx.html">Entering Matryx</a></li>
<li class="toctree-l1"><a class="reference internal" href="commit-system.html">The Matryx Commit System</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Matryx Bounty System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tournament-and-round-states">Tournament and Round States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entering-and-exiting-tournaments">Entering and Exiting Tournaments</a></li>
<li class="toctree-l2"><a class="reference internal" href="#making-your-first-submission">Making your first Submission</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-commit-balances">Checking Commit Balances</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collecting-your-reward">Collecting your Reward</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-your-own-tournament">Creating your own Tournament</a></li>
<li class="toctree-l2"><a class="reference internal" href="#updating-tournament-details">Updating Tournament Details</a></li>
<li class="toctree-l2"><a class="reference internal" href="#adding-to-a-tournament-bounty">Adding to a Tournament Bounty</a></li>
<li class="toctree-l2"><a class="reference internal" href="#choosing-tournament-winners">Choosing Tournament Winners</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="marketplace.html">Matryx Marketplace</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Versions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Matryx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>The Matryx Bounty System</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/bounty-system.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-matryx-bounty-system">
<h1>The Matryx Bounty System<a class="headerlink" href="#the-matryx-bounty-system" title="Permalink to this headline">¶</a></h1>
<p>The Matryx Bounty system enables and incentivizes decentralized scientific collaboration in the form of tournaments and submissions,
where all users participating in a tournament receive credit for their contributions, and the tournament bounty is rightfully distributed among the chosen winners.</p>
<div class="section" id="tournament-and-round-states">
<h2>Tournament and Round States<a class="headerlink" href="#tournament-and-round-states" title="Permalink to this headline">¶</a></h2>
<p>Each tournament in Matryx is subdivided into rounds, which are indexed incrementally.
In each round, tournament participants make submissions to the tournament, and at the end of each round one or multiple submissions are selected by the tournament owner to be the winners of the round.
The round winners then receive the allocated round reward.</p>
<p>A tournament can be in one of five possible states: <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>, <code class="docutils literal notranslate"><span class="pre">OnHold</span></code>, <code class="docutils literal notranslate"><span class="pre">Open</span></code>, <code class="docutils literal notranslate"><span class="pre">Closed</span></code>, or <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code>.</p>
<p>If a tournament is <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>, then its first round has not started yet.
If it is <code class="docutils literal notranslate"><span class="pre">OnHold</span></code>, that means that the tournament has already started but the next upcoming round has yet to begin.
<code class="docutils literal notranslate"><span class="pre">Open</span></code> tournaments are the ones that are currently active: submissions are being made or reviewed.
<code class="docutils literal notranslate"><span class="pre">Closed</span></code> tournaments are no longer active; the tournament owner has decided to end the tournament, and all of the tournament’s bounty has been distributed among the various rounds’ winners.
Lastly, a tournament becomes <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code> if a round ends without receiving any submissions, or if the tournament owner fails to select winners before the end of the round’s review period.</p>
<p>You can check the state of a tournament at any time by calling</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.getState()
</pre></div>
</div>
<p>A round can be in one of seven possible states: <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>, <code class="docutils literal notranslate"><span class="pre">Unfunded</span></code>, <code class="docutils literal notranslate"><span class="pre">Open</span></code>, <code class="docutils literal notranslate"><span class="pre">InReview</span></code>, <code class="docutils literal notranslate"><span class="pre">HasWinners</span></code>, <code class="docutils literal notranslate"><span class="pre">Closed</span></code>, or <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code>.</p>
<p>Rounds that have not started yet are <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>.
A round is <code class="docutils literal notranslate"><span class="pre">Unfunded</span></code> if it has already started but the tournament owner has not added any MTX to its bounty yet.
<code class="docutils literal notranslate"><span class="pre">Open</span></code> rounds are currently active; you can enter the round and make new submissions.
If a round is <code class="docutils literal notranslate"><span class="pre">InReview</span></code>, you can no longer make any more submissions (you’re going to have to wait until the next round!).
This is the time when the tournament owner reviews all the submissions made to the round and selects the winners.
A round is <code class="docutils literal notranslate"><span class="pre">Closed</span></code> after the <code class="docutils literal notranslate"><span class="pre">InReview</span></code> period ends.
Lastly, a round becomes <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code> if it reaches the end of its <code class="docutils literal notranslate"><span class="pre">Open</span></code> state without receiving any submissions.</p>
<p>You can check the state of any round at any time by calling</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.getRoundState(roundIndex)
</pre></div>
</div>
</div>
<div class="section" id="entering-and-exiting-tournaments">
<h2>Entering and Exiting Tournaments<a class="headerlink" href="#entering-and-exiting-tournaments" title="Permalink to this headline">¶</a></h2>
<p>To enter a tournament that you’d like to participate in, you can make the following call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.enter()
</pre></div>
</div>
<p>Whenever you enter a tournament, you will have to pay the tournament entry fee designated by the tournament creator, so you will need to first approve at least that many MTX tokens.
To check what a tournament’s entry fee is before entering, you can call</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.getDetails()
</pre></div>
</div>
<p>You can choose to exit an ongoing tournament at any time with the following call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.exit()
</pre></div>
</div>
<p>When you exit the tournament, the entry fee that you paid when you first entered will be returned to you automatically.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you later decide to enter the tournament again, you will have to pay the tournament entry fee again before making any submissions.</p>
</div>
<p>If a tournament you are currently participating in happens to become <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code>, you can collect your share of the remaining tournament bounty, as well as your original entry fee, with the following call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.withdrawFromAbandoned()
</pre></div>
</div>
</div>
<div class="section" id="making-your-first-submission">
<h2>Making your first Submission<a class="headerlink" href="#making-your-first-submission" title="Permalink to this headline">¶</a></h2>
<p>To create a submission, you must first enter the tournament that you want to participate in by calling</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.enter()
</pre></div>
</div>
<p>You can then create a submission in two ways: You can create a new commit and submit it to the tournament, or you can submit one of your previous commits.</p>
<p>To create a new commit, you first need to claim the commit hash:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>commit.claimCommit(commitHash)
</pre></div>
</div>
<p>Then, you can create the commit and submit it to a tournament using the following function:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>commit.createSubmission(tournament, content, parentHash, isFork, salt, commitContent, value)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">tournament</span></code> is the address of the tournament, <code class="docutils literal notranslate"><span class="pre">content</span></code> is the Submission content,
and <code class="docutils literal notranslate"><span class="pre">parentHash</span></code>, <code class="docutils literal notranslate"><span class="pre">isFork</span></code>, <code class="docutils literal notranslate"><span class="pre">salt</span></code>, <code class="docutils literal notranslate"><span class="pre">commitContent</span></code>, and <code class="docutils literal notranslate"><span class="pre">value</span></code> are the data that corresponds to the commit you are creating.</p>
<p>Alternatively, if you want to submit a commit that already exists, you can simply call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.createSubmission(content, commitHash)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">content</span></code> is the content of your submission and <code class="docutils literal notranslate"><span class="pre">commitHash</span></code> is the hash of your commit.</p>
</div>
<div class="section" id="checking-commit-balances">
<h2>Checking Commit Balances<a class="headerlink" href="#checking-commit-balances" title="Permalink to this headline">¶</a></h2>
<p>If a commit receives some amount of MTX, the appropriate amount will be allocated to the commit on the Matryx platform.
To check the current allocated balance of any commit, you can call</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>commit.getCommitBalance(commitHash)
</pre></div>
</div>
</div>
<div class="section" id="collecting-your-reward">
<h2>Collecting your Reward<a class="headerlink" href="#collecting-your-reward" title="Permalink to this headline">¶</a></h2>
<p>When a commit in your line of work receives a reward from winning a tournament, you can withdraw your share of the reward by calling:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>commit.withdrawAvailableReward(commitHash)
</pre></div>
</div>
<p>To check the reward that any user is entitled to for any particular commit, you can call</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>commit.getAvailableRewardForUser(userAddress)
</pre></div>
</div>
<p>After you withdraw your reward, your available reward for that particular commit goes down to 0.</p>
<p>The share of the reward that is allocated to each commit owner in a commit chain is proportional to the total value of the commits that they created.
Therefore, when a commit wins a tournament, everyone who contributed a piece of work used by the winning commit receives compensation for their contributions.</p>
</div>
<div class="section" id="creating-your-own-tournament">
<h2>Creating your own Tournament<a class="headerlink" href="#creating-your-own-tournament" title="Permalink to this headline">¶</a></h2>
<p>To create a tournament, you can call the <code class="docutils literal notranslate"><span class="pre">createTournament</span></code> function on the platform as follows:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>platform.createTournament(tournamentDetails, roundDetails)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">tournamentDetails</span></code> and <code class="docutils literal notranslate"><span class="pre">roundDetails</span></code> are:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>struct TournamentDetails
{
    string content;
    uint256 bounty;
    uint256 entryFee;
}

struct RoundDetails
{
    uint256 start;
    uint256 duration;
    uint256 review;
    uint256 bounty;
}
</pre></div>
</div>
<p>These structs contain information about the tournament that you are about to create and the first round that will kick off when the tournament begins.
You can add more funds to the tournament bounty at any point, but you cannot remove funds from it after you make the <code class="docutils literal notranslate"><span class="pre">createTournament</span></code> call, so choose your initial bounty wisely!</p>
<p>Similarly, you cannot remove funds from the share of the tournament bounty you assign to the first round, and you won’t be able to edit the round details after the round has started.
Be sure to enter a reasonable amount of time (in seconds) for the round’s <code class="docutils literal notranslate"><span class="pre">start</span></code> time and <code class="docutils literal notranslate"><span class="pre">duration</span></code>, as well as its <code class="docutils literal notranslate"><span class="pre">review</span></code> period.
You’ll need some time to look over the submissions and choose your round winners before the review period ends!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The tournament and round bounty will be visible to any users looking to enter your tournament, as well as the tournament and round details.</p>
</div>
</div>
<div class="section" id="updating-tournament-details">
<h2>Updating Tournament Details<a class="headerlink" href="#updating-tournament-details" title="Permalink to this headline">¶</a></h2>
<p>To edit the data of your tournament, you can call the <code class="docutils literal notranslate"><span class="pre">updateDetails</span></code> function as follows:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.updateDetails(tournamentDetails)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">tournamentDetails</span></code> is the same data struct used to create the tournament originally.
The <code class="docutils literal notranslate"><span class="pre">bounty</span></code> field, however, will not change when you try to modify the tournament’s data.</p>
</div>
<div class="section" id="adding-to-a-tournament-bounty">
<h2>Adding to a Tournament Bounty<a class="headerlink" href="#adding-to-a-tournament-bounty" title="Permalink to this headline">¶</a></h2>
<p>Suppose you wanted to add MTX to a tournament’s bounty. You can call the <code class="docutils literal notranslate"><span class="pre">addToBounty</span></code> function as follows:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.addToBounty(amount)
</pre></div>
</div>
<p>This function transfers MTX to the specified tournament. To allocate these new funds to the current round, you can call the <code class="docutils literal notranslate"><span class="pre">transferToRound</span></code> function:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.transferToRound(amount)
</pre></div>
</div>
<p>The added MTX will now also be distributed to this round’s winners when it is time to reward their submissions.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Remember that you cannot remove funds from a tournament’s bounty after you’ve added them or remove funds from a round after it has already started.</p>
</div>
</div>
<div class="section" id="choosing-tournament-winners">
<h2>Choosing Tournament Winners<a class="headerlink" href="#choosing-tournament-winners" title="Permalink to this headline">¶</a></h2>
<p>To get all the submissions made to a round, you can call</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.getRoundInfo(roundIndex)
</pre></div>
</div>
<p>Round info contains all the hashes of all the submissions made to the round. To view the contents of each submission, you can call</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>platform.getSubmission(submissionHash)
</pre></div>
</div>
<p>To choose your round winners, you can call <code class="docutils literal notranslate"><span class="pre">selectWinners</span></code> on the tournament as follows:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.selectWinners(winnersData, roundDetails)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">winnersData</span></code> is:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>struct WinnersData
{
    bytes32[] submissions;
    uint256[] distribution;
    uint256 action;
}
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">action</span></code> represents an enumerated value from the following enum:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>enum SelectWinnerAction { DoNothing, StartNextRound, CloseTournament }
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">RoundDetails</span></code> are:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>struct RoundDetails
{
    uint256 start;
    uint256 duration;
    uint256 review;
    uint256 bounty;
}
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">winnersData</span></code>, you can specify which submissions get rewarded and how much MTX is assigned to each one.
The first parameter contains all the winning submissions’ hashes, and the second contains the reward each one will get, respectively, expressed as a percentage or a proportion of the total round bounty.</p>
<p>When selecting round winners, you have three options for how to proceed with the tournament:
you can choose to wait until the end of the review period for the next round to start, to start the next round immediately after selecting the winners, or to close the tournament.
The action you choose (0, 1 or 2, representing <code class="docutils literal notranslate"><span class="pre">SelectWinnerAction.DoNothing</span></code>, <code class="docutils literal notranslate"><span class="pre">SelectWinnerAction.StartNextRound</span></code> and <code class="docutils literal notranslate"><span class="pre">SelectWinnerAction.CloseTournament</span></code>, respectively)
is passed as the third parameter of <code class="docutils literal notranslate"><span class="pre">winnersData</span></code> and indicates how you would like to proceed.</p>
<p>If you choose to wait until the end of the review period (<code class="docutils literal notranslate"><span class="pre">DoNothing</span></code>), the next round will automatically be created as an identical copy of the last round, and it will begin once the current review period ends.
If you choose to start the next round immediately when you select the winners (<code class="docutils literal notranslate"><span class="pre">StartNextRound</span></code>), the next round will be initialized with the round data that you provide and will begin immediately.
If you choose to close the Tournament (<code class="docutils literal notranslate"><span class="pre">CloseTournament</span></code>), the remaining bounty unallocated to any round will be allocated to the current round and used to award <code class="docutils literal notranslate"><span class="pre">winnersData.submissions</span></code>,
and the Tournament will end.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Once you close the tournament, you can’t open it up again. Any remaining funds that might still be in the tournament’s balance will be evenly distributed among the last round’s winners when you decide to close the tournament.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the round’s review period ends and you still have not chosen any winners, the tournament will be considered Abandoned, and any remaining funds in the tournament’s balance will be uniformly allocated to all of the round’s participants for them to withdraw.</p>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="marketplace.html" class="btn btn-neutral float-right" title="Matryx Marketplace" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="commit-system.html" class="btn btn-neutral" title="The Matryx Commit System" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Max Howard, Sam Hessenauer.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../',
            VERSION:'0.2',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../_static/jquery.js"></script>
      <script type="text/javascript" src="../_static/underscore.js"></script>
      <script type="text/javascript" src="../_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>