

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>The Matryx Bounty System &mdash; Matryx 0.2 documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Matryx Marketplace" href="marketplace.html" />
    <link rel="prev" title="The Commit System" href="commit-system.html" /> 

  
  <script src="../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../index.html" class="icon icon-home"> Matryx
          

          
          </a>

          
            
            
              <div class="version">
                0.2
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">API Documentation</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="entering-matryx.html">Entering Matryx</a></li>
<li class="toctree-l1"><a class="reference internal" href="commit-system.html">The Commit System</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">The Matryx Bounty System</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#tournament-and-round-states">Tournament and Round States</a></li>
<li class="toctree-l2"><a class="reference internal" href="#creating-a-tournament">Creating a Tournament</a></li>
<li class="toctree-l2"><a class="reference internal" href="#editing-a-tournament">Editing A Tournament</a></li>
<li class="toctree-l2"><a class="reference internal" href="#increasing-the-tournament-bounty">Increasing the Tournament Bounty</a></li>
<li class="toctree-l2"><a class="reference internal" href="#choosing-tournament-winners">Choosing Tournament Winners</a></li>
<li class="toctree-l2"><a class="reference internal" href="#entering-a-tournament">Entering a Tournament</a></li>
<li class="toctree-l2"><a class="reference internal" href="#making-a-submission">Making A Submission</a></li>
<li class="toctree-l2"><a class="reference internal" href="#checking-commit-balances">Checking Commit Balances</a></li>
<li class="toctree-l2"><a class="reference internal" href="#collecting-mtx">Collecting MTX</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="marketplace.html">Matryx Marketplace</a></li>
<li class="toctree-l1"><a class="reference internal" href="faq.html">Frequently Asked Questions</a></li>
<li class="toctree-l1"><a class="reference internal" href="versions.html">Versions</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Matryx</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
      <li>The Matryx Bounty System</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/source/bounty-system.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="the-matryx-bounty-system">
<h1>The Matryx Bounty System<a class="headerlink" href="#the-matryx-bounty-system" title="Permalink to this headline">¶</a></h1>
<p>The Matryx Bounty system enables and incentivizes decentralized scientific collaboration in the form of tournaments and submissions, where all users participating in a tournament receive credit for their contributions, and the tournament bounty is rightfully distributed among the chosen winners.</p>
<div class="section" id="tournament-and-round-states">
<h2>Tournament and Round States<a class="headerlink" href="#tournament-and-round-states" title="Permalink to this headline">¶</a></h2>
<p>Each tournament in Matryx is subdivided into rounds. In each round, tournament participants make submissions to the tournament. At the end of each round, one or multiple submissions are chosen by the tournament owner to be the winners of the round. Those winners then receive the allocated round reward.</p>
<p>A tournament can be in one of five possible states: <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>, <code class="docutils literal notranslate"><span class="pre">OnHold</span></code>, <code class="docutils literal notranslate"><span class="pre">Open</span></code>, <code class="docutils literal notranslate"><span class="pre">Closed</span></code>, or <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code>.</p>
<p>If a tournament is <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>, then its first round has not started yet. If it is <code class="docutils literal notranslate"><span class="pre">OnHold</span></code>, that means that the tournament has already started but the next upcoming round has yet to begin. <code class="docutils literal notranslate"><span class="pre">Open</span></code> tournaments are the ones that are currently active: submissions are being made or reviewed. <code class="docutils literal notranslate"><span class="pre">Closed</span></code> tournaments are no longer active; the tournament owner has decided to end the tournament, and all of the tournament’s bounty has been distributed among the various rounds’ winners. Lastly, a tournament becomes <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code> if a round ends without receiving any submissions, or if the tournament owner fails to select winners before the end of the round’s review period.</p>
<p>You can check the state of a tournament at any time by calling</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.getState()
</pre></div>
</div>
<p>A round can be in one of seven possible states: <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>, <code class="docutils literal notranslate"><span class="pre">Unfunded</span></code>, <code class="docutils literal notranslate"><span class="pre">Open</span></code>, <code class="docutils literal notranslate"><span class="pre">InReview</span></code>, <code class="docutils literal notranslate"><span class="pre">HasWinners</span></code>, <code class="docutils literal notranslate"><span class="pre">Closed</span></code>, or <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code>.</p>
<p>Rounds that have not started yet are <code class="docutils literal notranslate"><span class="pre">NotYetOpen</span></code>. A round is <code class="docutils literal notranslate"><span class="pre">Unfunded</span></code> if it has already started but the tournament owner has not added any funds to its bounty yet. <code class="docutils literal notranslate"><span class="pre">Open</span></code> rounds are currently active; you can enter the round and make new submissions. If a round is <code class="docutils literal notranslate"><span class="pre">InReview</span></code>, you can no longer make any more submissions (you’re going to have to wait until the next round!). This is the time when the tournament owner reviews all the submissions made to the round and selects the winners. A round is <code class="docutils literal notranslate"><span class="pre">Closed</span></code> after the <code class="docutils literal notranslate"><span class="pre">InReview</span></code> period ends. Lastly, a round becomes <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code> if it reaches the end of its <code class="docutils literal notranslate"><span class="pre">Open</span></code> state without receiving any submissions.</p>
<p>You can check the state of any round at any time by calling</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>round.getState()
</pre></div>
</div>
</div>
<div class="section" id="creating-a-tournament">
<h2>Creating a Tournament<a class="headerlink" href="#creating-a-tournament" title="Permalink to this headline">¶</a></h2>
<p>To create a tournament, call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>platform.createTournament(tournamentData, roundData)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">TournamentData</span></code> and <code class="docutils literal notranslate"><span class="pre">RoundData</span></code> are:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>struct TournamentData
{
    bytes32[3] title;
    bytes32 category;
    bytes32[2] descHash;
    bytes32[2] fileHash;
    uint256 bounty;
    uint256 entryFee;
}

struct RoundData
{
    uint256 start;
    uint256 end;
    uint256 review;
    uint256 bounty;
}
</pre></div>
</div>
<p>These structs contain all the necessary information to begin a tournament. <code class="docutils literal notranslate"><span class="pre">roundData</span></code> contains the parameters of the first round that will start when the tournament begins. The tournament bounty is the MTX amount that will be rewarded to the winners of this tournament. Each round of the tournament rewards its winners with a share of the tournament bounty that you will have specified. Note that once you have entered a tournament bounty, you can always increase it, but you cannot decrease the amount. Choose your bounty wisely!</p>
<p>Similarly, you cannot remove funds from the share of the tournament bounty you assign to the first round, and you won’t be able to edit the round details after the round has started. Be sure to enter a reasonable amount of time (in seconds) for the round’s start and end time, as well as its review period. You’ll need some time to look over the submissions and choose your round winners before the review period ends!</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">The tournament and round bounty will be visible to any users looking to enter your tournament, as well as the tournament and round details.</p>
</div>
</div>
<div class="section" id="editing-a-tournament">
<h2>Editing A Tournament<a class="headerlink" href="#editing-a-tournament" title="Permalink to this headline">¶</a></h2>
<p>To edit the data of your tournament, you can call the <code class="docutils literal notranslate"><span class="pre">updateDetails</span></code> function as follows:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.updateDetails(tournamentData)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">tournamentData</span></code> is the same data struct used to create the tournament originally. The bounty field, however, will not change when you try to modify the tournament’s data.</p>
</div>
<div class="section" id="increasing-the-tournament-bounty">
<h2>Increasing the Tournament Bounty<a class="headerlink" href="#increasing-the-tournament-bounty" title="Permalink to this headline">¶</a></h2>
<p>Suppose you wanted to add MTX to a tournament’s bounty. You can call the <code class="docutils literal notranslate"><span class="pre">addFunds</span></code> function as follows:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.addFunds(1)
</pre></div>
</div>
<p>This function transfers funds to the specified tournament. To allocate these new funds to the current round, you can call the <code class="docutils literal notranslate"><span class="pre">transferToRound</span></code> function.</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.transferToRound(1)
</pre></div>
</div>
<p>The added funds will now also be distributed to this round’s winners when it is time to reward their submissions.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Remember that you cannot remove funds from a tournament’s bounty after you’ve added them or remove funds from a round after it has already started.</p>
</div>
</div>
<div class="section" id="choosing-tournament-winners">
<h2>Choosing Tournament Winners<a class="headerlink" href="#choosing-tournament-winners" title="Permalink to this headline">¶</a></h2>
<p>To get all the submissions made to this round, you can call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>round.getSubmissions()
</pre></div>
</div>
<p>To choose your round winners, you can call <code class="docutils literal notranslate"><span class="pre">selectWinners</span></code> on the tournament as follows:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.selectWinners(winnersData, roundData)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">winnersData</span></code> is:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>struct WinnersData
{
    bytes32[] submissions;
    uint256[] distribution;
    uint256 action;
}
</pre></div>
</div>
<p>Here, <code class="docutils literal notranslate"><span class="pre">action</span></code> represents an enumerated value from the following enum:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>enum SelectWinnerAction
{
    DoNothing,
    StartNextRound,
    CloseTournament
}
</pre></div>
</div>
<p>and <code class="docutils literal notranslate"><span class="pre">RoundData</span></code> is the following struct:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>struct RoundData
{
    uint256 start;
    uint256 end;
    uint256 review;
    uint256 bounty;
}
</pre></div>
</div>
<p>In <code class="docutils literal notranslate"><span class="pre">winnersData</span></code>, you can specify which submissions get rewarded and how much MTX is assigned to each one; the first parameter contains all the winning submissions’ hashes, and the second contains the reward each one will get, respectively, expressed as a percentage or a proportion of the total round bounty.</p>
<p>When selecting round winners, you have three options for how to proceed with the tournament: you can choose to wait until the end of the review period for the next round to start, to start the next round immediately after selecting the winners, or to close the tournament. The action you choose (0, 1 or 2, representing <code class="docutils literal notranslate"><span class="pre">SelectWinnerAction.DoNothing</span></code>, <code class="docutils literal notranslate"><span class="pre">SelectWinnerAction.StartNextRound</span></code> and <code class="docutils literal notranslate"><span class="pre">SelectWinnerAction.CloseTournament</span></code>, respectively) is passed as the third parameter of winnersData and indicates how you would like to proceed.</p>
<p>If you choose to wait until the end of the review period (<code class="docutils literal notranslate"><span class="pre">DoNothing</span></code>), the next round will automatically be created as an identical copy of the last round and will start as soon as the current round’s review period ends. If you choose to start the next round when you select the winners (<code class="docutils literal notranslate"><span class="pre">StartNextRound</span></code>), the next round will be initialized with the round data that you provide and will begin immediately after selecting the winners. If you choose to close the Tournament (<code class="docutils literal notranslate"><span class="pre">CloseTournament</span></code>), the remaining bounty unallocated to any round will be transferred to the current round and used to award <code class="docutils literal notranslate"><span class="pre">winnersData.submissions</span></code>, and the Tournament will end.</p>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">Once you close the tournament, you can’t open it up again. Any remaining funds that might still be in the tournament’s balance will be evenly distributed among the last round’s winners when you close the tournament.</p>
</div>
<div class="admonition warning">
<p class="first admonition-title">Warning</p>
<p class="last">If the round’s review period ends and you still have not chosen any winners, the tournament will be considered Abandoned, and any remaining funds in the tournament’s balance will be uniformly allocated to all tournament participants for them to withdraw.</p>
</div>
</div>
<div class="section" id="entering-a-tournament">
<h2>Entering a Tournament<a class="headerlink" href="#entering-a-tournament" title="Permalink to this headline">¶</a></h2>
<p>To enter a tournament that you’d like to participate in, you can make the following call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.enter()
</pre></div>
</div>
<p>Whenever you enter a tournament, you will have to pay the tournament entry fee designated by the tournament creator, so you need to first approve at least that many MTX tokens. To check a tournament’s entry fee before entering, you can call</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.getEntryFee()
</pre></div>
</div>
<p>You can choose to exit an ongoing tournament at any time with the following call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.exit()
</pre></div>
</div>
<p>When you exit the tournament, the entry fee that you paid when you first entered will be returned to you automatically.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">If you later decide to enter the tournament again, you will have to pay the current tournament entry fee before making any submissions.</p>
</div>
<p>If a tournament you are currently participating in happens to become <code class="docutils literal notranslate"><span class="pre">Abandoned</span></code>, you can collect your share of the remaining tournament bounty, as well as your original entry fee, with the following call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.withdrawFromAbandoned()
</pre></div>
</div>
</div>
<div class="section" id="making-a-submission">
<h2>Making A Submission<a class="headerlink" href="#making-a-submission" title="Permalink to this headline">¶</a></h2>
<p>To create a submission, you must first enter the tournament that you want to participate in. You can create a submission in two ways:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>tournament.createSubmission(title, descriptionHash, commitHash)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">title</span></code> is the title of your submission, <code class="docutils literal notranslate"><span class="pre">descriptionHash</span></code> is an IPFS hash with text content for the description of your submission, and <code class="docutils literal notranslate"><span class="pre">commitHash</span></code> is a commit that already exists on the Matryx commit system. This commit will then become a submission that is entered into the tournament.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">You must be the owner of the commit in order to submit it to a tournament.</p>
</div>
<p>Alternatively, you can create a new commit and submit it to a tournament by calling:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>commitSystem.submitToTournament(tournamentAddress, title, descriptionHash, contentHash, value, parentHash, group)
</pre></div>
</div>
<p>Where <code class="docutils literal notranslate"><span class="pre">tournamentAddress</span></code> is the address of tournament to submit to; <code class="docutils literal notranslate"><span class="pre">title</span></code> is the title of the submission; <code class="docutils literal notranslate"><span class="pre">descriptionHash</span></code> is the IPFS hash of the submission’s description; <code class="docutils literal notranslate"><span class="pre">contentHash</span></code> is the hash of the commit’s content; <code class="docutils literal notranslate"><span class="pre">value</span></code> is the author-determined value of the commit; <code class="docutils literal notranslate"><span class="pre">parentHash</span></code> is the parent commit hash; <code class="docutils literal notranslate"><span class="pre">group</span></code> is the name of the group for the commit.</p>
</div>
<div class="section" id="checking-commit-balances">
<h2>Checking Commit Balances<a class="headerlink" href="#checking-commit-balances" title="Permalink to this headline">¶</a></h2>
<p>If a commit receives some amount of MTX, the funds will initially be stored on the Matryx platform. To check the current allocated balance of any commit on the platform, you can call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>platform.getCommitBalance(commitHash)
</pre></div>
</div>
</div>
<div class="section" id="collecting-mtx">
<h2>Collecting MTX<a class="headerlink" href="#collecting-mtx" title="Permalink to this headline">¶</a></h2>
<p>When a commit receives a MTX reward from winning a Tournament, someone must first call <code class="docutils literal notranslate"><span class="pre">distributeReward</span></code> to make the funds available to the commit owner and the owners of the commit’s ancestors:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>commit.distributeReward(commitHash)
</pre></div>
</div>
<p>This calculates and allocates the reward to each commit owner, proportional to the total value of the commits that they created. The balance of the commit becomes 0 after calling this function, since the calculated value has now been allocated to each individual user address instead.</p>
<p>To get the balance that is allocated to each user address, you can call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>platform.getBalanceOf(userAddress)
</pre></div>
</div>
<p>Finally, to have your allocated tokens transferred to your account, call:</p>
<div class="highlight-Solidity notranslate"><div class="highlight"><pre><span></span>platform.withdrawBalance()
</pre></div>
</div>
<p>Congrats! You may now use your MTX to place bounties on your own scientific inquiries.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="marketplace.html" class="btn btn-neutral float-right" title="Matryx Marketplace" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="commit-system.html" class="btn btn-neutral" title="The Commit System" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, Max Howard, Sam Hessenauer

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    

  

  <script type="text/javascript" src="../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>